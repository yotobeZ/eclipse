
<!-- 
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE- 2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License. 
-->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
    <LINK type="text/css" rel="stylesheet" href="resources/space.css">
    <STYLE type="text/css">
      .footer {
        background-image:      url('http://cwiki.apache.org/confluence/images/border/border_bottom.gif');
        background-repeat:     repeat-x;
        background-position:   left top;
        padding-top:           4px;
        color:                 #666;
      }
    </STYLE>
    <SCRIPT type="text/javascript" language="javascript">
      var hide = null;
      var show = null;
      var children = null;

      function init() {
        /* Search form initialization */
        var form = document.forms['search'];
        if (form != null) {
          form.elements['domains'].value = location.hostname;
          form.elements['sitesearch'].value = location.hostname;
        }

        /* Children initialization */
        hide = document.getElementById('hide');
        show = document.getElementById('show');
        children = document.all != null ?
                   document.all['children'] :
                   document.getElementById('children');
        if (children != null) {
          children.style.display = 'none';
          show.style.display = 'inline';
          hide.style.display = 'none';
        }
      }

      function showChildren() {
        children.style.display = 'block';
        show.style.display = 'none';
        hide.style.display = 'inline';
      }

      function hideChildren() {
        children.style.display = 'none';
        show.style.display = 'inline';
        hide.style.display = 'none';
      }
    </SCRIPT>
    <TITLE>Convention Plugin</TITLE>
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY onload="init()">
    <TABLE border="0" cellpadding="2" cellspacing="0" width="100%">
      <TR class="topBar">
        <TD align="left" valign="middle" class="topBarDiv" nowrap="">
          &nbsp;<A href="home.html" title="Apache Struts 2 Documentation">Apache Struts 2 Documentation</A>&nbsp;&gt;&nbsp;<A href="home.html" title="Home">Home</A>&nbsp;&gt;&nbsp;<A href="guides.html" title="Guides">Guides</A>&nbsp;&gt;&nbsp;<A href="plugin-developers-guide.html" title="Plugin Developers Guide">Plugin Developers Guide</A>&nbsp;&gt;&nbsp;<A href="" title="Convention Plugin">Convention Plugin</A>
        </TD>
        <TD align="right" valign="middle" nowrap="">
          <FORM name="search" action="http://www.google.com/search" method="get">
            <INPUT type="hidden" name="ie" value="UTF-8">
            <INPUT type="hidden" name="oe" value="UTF-8">
            <INPUT type="hidden" name="domains" value="">
            <INPUT type="hidden" name="sitesearch" value="">
            <INPUT type="text" name="q" maxlength="255" value="">        
            <INPUT type="submit" name="btnG" value="Google Search">
          </FORM>
        </TD>
      </TR> 
    </TABLE>

    <DIV id="PageContent">
      <DIV class="pageheader" style="padding: 6px 0px 0px 0px;">
        <!-- We'll enable this once we figure out how to access (and save) the logo resource -->
        <!--img src="/wiki/images/confluence_logo.gif" style="float: left; margin: 4px 4px 4px 10px;" border="0"-->
        <DIV style="margin: 0px 10px 0px 10px" class="smalltext">Apache Struts 2 Documentation</DIV>
        <DIV style="margin: 0px 10px 8px 10px" class="pagetitle">Convention Plugin</DIV>

        <DIV class="greynavbar" align="right" style="padding: 2px 10px; margin: 0px;">
          <A href="http://cwiki.apache.org/confluence/pages/editpage.action?pageId=105613">
            <IMG src="http://cwiki.apache.org/confluence/images/icons/notep_16.gif" height="16" width="16" border="0" align="absmiddle" title="Edit Page"></A>
            <A href="http://cwiki.apache.org/confluence/pages/editpage.action?pageId=105613">Edit Page</A>
          &nbsp;
          <A href="http://cwiki.apache.org/confluence/pages/listpages.action?key=WW">
            <IMG src="http://cwiki.apache.org/confluence/images/icons/browse_space.gif" height="16" width="16" border="0" align="absmiddle" title="Browse Space"></A>
            <A href="http://cwiki.apache.org/confluence/pages/listpages.action?key=WW">Browse Space</A>
          &nbsp;
          <A href="http://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=WW&fromPageId=105613">
            <IMG src="http://cwiki.apache.org/confluence/images/icons/add_page_16.gif" height="16" width="16" border="0" align="absmiddle" title="Add Page"></A>
          <A href="http://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=WW&fromPageId=105613">Add Page</A>
          &nbsp;
          <A href="http://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=WW&fromPageId=105613">
            <IMG src="http://cwiki.apache.org/confluence/images/icons/add_blogentry_16.gif" height="16" width="16" border="0" align="absmiddle" title="Add News"></A>
          <A href="http://cwiki.apache.org/confluence/pages/createblogpost.action?spaceKey=WW&fromPageId=105613">Add News</A>
        </DIV>
      </DIV>
      <DIV class="pagesubheading" style="margin: 0px 10px 0px 10px;">
                    Added by     <A href="http://cwiki.apache.org/confluence/users/viewuserprofile.action?username=musachy">Musachy Barroso</A>, last edited by     <A href="http://cwiki.apache.org/confluence/users/viewuserprofile.action?username=newton.dave@yahoo.com">Dave Newton</A> on Dec 24, 2008
                      &nbsp;(<A href="http://cwiki.apache.org/confluence/pages/diffpages.action?pageId=105613&originalId=106046">view change</A>)
              
      </DIV>

      <DIV class="pagecontent">
        <DIV class="wiki-content">
          <STYLE type="text/css">/*<![CDATA[*/
div.rbtoc1230148345228 {margin-left: 0px;padding: 0px;}
div.rbtoc1230148345228 ul {list-style: none;margin-left: 0px;}
div.rbtoc1230148345228 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</STYLE><DIV class="rbtoc1230148345228">
<UL>
  <LI><SPAN class="TOCOutline">1</SPAN> <A href="#ConventionPlugin-Introduction">Introduction</A></LI>
  <LI><SPAN class="TOCOutline">2</SPAN> <A href="#ConventionPlugin-Setup">Setup</A></LI>
  <LI><SPAN class="TOCOutline">3</SPAN> <A href="#ConventionPlugin-Helloworld">Hello world</A></LI>
  <LI><SPAN class="TOCOutline">4</SPAN> <A href="#ConventionPlugin-Codebehindhelloworld">Code behind hello world</A></LI>
  <LI><SPAN class="TOCOutline">5</SPAN> <A href="#ConventionPlugin-Resultsandresultcodes">Results and result codes</A></LI>
  <LI><SPAN class="TOCOutline">6</SPAN> <A href="#ConventionPlugin-Chaining">Chaining</A></LI>
  <LI><SPAN class="TOCOutline">7</SPAN> <A href="#ConventionPlugin-XWorkpackages">XWork packages</A></LI>
  <LI><SPAN class="TOCOutline">8</SPAN> <A href="#ConventionPlugin-Annotationreference">Annotation reference</A>
<UL>
  <LI><SPAN class="TOCOutline">8.1</SPAN> <A href="#ConventionPlugin-Actionannotation">Action annotation</A></LI>
  <LI><SPAN class="TOCOutline">8.2</SPAN> <A href="#ConventionPlugin-InterceptorRefannotation">InterceptorRef annotation</A></LI>
  <LI><SPAN class="TOCOutline">8.3</SPAN> <A href="#ConventionPlugin-Resultannotation">Result annotation</A></LI>
  <LI><SPAN class="TOCOutline">8.4</SPAN> <A href="#ConventionPlugin-Namespaceannotation">Namespace annotation</A></LI>
  <LI><SPAN class="TOCOutline">8.5</SPAN> <A href="#ConventionPlugin-ResultPathannotation">ResultPath annotation</A></LI>
  <LI><SPAN class="TOCOutline">8.6</SPAN> <A href="#ConventionPlugin-ParentPackageannotation">ParentPackage annotation</A></LI>
  <LI><SPAN class="TOCOutline">8.7</SPAN> <A href="#ConventionPlugin-ExceptionMappingAnnotation">ExceptionMapping Annotation</A></LI>
</UL></LI>
  <LI><SPAN class="TOCOutline">9</SPAN> <A href="#ConventionPlugin-Automaticconfigurationreloading">Automatic configuration reloading</A></LI>
  <LI><SPAN class="TOCOutline">10</SPAN> <A href="#ConventionPlugin-Troubleshooting">Troubleshooting</A>
<UL>
  <LI><SPAN class="TOCOutline">10.1</SPAN> <A href="#ConventionPlugin-Tips">Tips</A></LI>
  <LI><SPAN class="TOCOutline">10.2</SPAN> <A href="#ConventionPlugin-CommonErrors">Common Errors</A></LI>
</UL></LI>
  <LI><SPAN class="TOCOutline">11</SPAN> <A href="#ConventionPlugin-Configurationreference">Configuration reference</A></LI>
</UL></DIV>

<H1><A name="ConventionPlugin-Introduction"></A>Introduction</H1>

<P>The Convention Plugin is bundled with Struts since 2.1 and replaces the <A href="codebehind-plugin.html" title="Codebehind Plugin">Codebehind Plugin</A> and Zero Config plugins. It provides the following features:</P>

<UL>
	<LI>Action location by package naming conventions</LI>
	<LI>Result (JSP, FreeMarker, etc) location by naming conventions</LI>
	<LI>Class name to URL naming convention</LI>
	<LI>Package name to namespace convention</LI>
	<LI>SEO compliant URLs (i.e. my-action rather than MyAction)</LI>
	<LI>Action name overrides using annotations</LI>
	<LI>Interceptor overrides using annotations</LI>
	<LI>Namespace overrides using annotations</LI>
	<LI>XWork package overrides using annotations</LI>
	<LI>Default action and result handling (i.e. /products will try com.example.actions.Products as well as com.example.actions.products.Index)</LI>
</UL>


<P>The Convention Plugin should require no configuration to use. Many of the conventions can be controlled using configuration properties and many of the classes can be extended or overridden.</P>

<H1><A name="ConventionPlugin-Setup"></A>Setup</H1>

<P>In order to use the Convention plugin, you first need to add the JAR file to the <B>WEB-INF/lib</B> directory of your application (if you package your actions in jar files, make sure that <EM>struts.convention.action.disableJarScanning</EM> is set to <EM>true</EM>). </P>

<H1><A name="ConventionPlugin-Helloworld"></A>Hello world</H1>

<P>Now that the Convention plugin has been added to your application, let's start with a very simple example. This example will use an actionless result that is identified by the URL. By default, the Convention plugin assumes that all of the results are stored in <B>WEB-INF/content</B>. This can be changed by setting the property <B>struts.convention.result.path</B> in the Struts properties file to the new location. Don't worry about trailing slashes, the Convention plugin handles this for you. Here is our hello world JSP:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>WEB-INF/content/hello-world.jsp</B></DIV><DIV class="codeContent">
<PRE class="code-java">&lt;html&gt;
&lt;body&gt;
Hello world!
&lt;/body&gt;
&lt;/html&gt;</PRE>
</DIV></DIV>

<P>If you start Tomcat (or whichever J2EE container you are using) and type in <SPAN class="nobr"><A href="http://localhost:8080/hello-world" title="Visit page outside Confluence" rel="nofollow">http://localhost:8080/hello-world<SUP><IMG class="rendericon" src="http://cwiki.apache.org/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"></SUP></A></SPAN> into your browser you should get this result:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>WEB-INF/content/hello-world.jsp</B></DIV><DIV class="codeContent">
<PRE class="code-java">Hello world!</PRE>
</DIV></DIV>

<P>This illustrates that the Convention plugin will find results even when no action exists and it is all based on the URL passed to Struts.</P>

<H1><A name="ConventionPlugin-Codebehindhelloworld"></A>Code behind hello world</H1>

<P>Let's expand on this example and add a code behind class. In order to do this we need to ensure that the Convention plugin is able to find our action classes. By default, the Convention plugin will find all action classes that implement <B>com.opensymphony.xwork2.Action</B> or whose name ends with the word <B>Action</B> in specific packages. </P>

<P>These packages are located by the Convention plugin using a search methodology. First the Convention plugin finds packages named <B>struts</B>, <B>struts2</B>, <B>action</B> or <B>actions</B>. Any packages that match those names are considered the root packages for the Convention plugin. Next, the plugin looks at all of the classes in those packages as well as sub-packages and determines if the classes implement <B>com.opensymphony.xwork2.Action</B> or if their name ends with <B>Action</B> (i.e. FooAction). Here's an example of a few classes that the Convention plugin will find:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>Classes</B></DIV><DIV class="codeContent">
<PRE class="code-java">com.example.actions.MainAction
com.example.actions.products.Display (<SPAN class="code-keyword">implements</SPAN> com.opensymphony.xwork2.Action)
com.example.struts.company.details.ShowCompanyDetailsAction</PRE>
</DIV></DIV>

<P>Each of the action classes that the plugin finds will be configured to respond to specific URLs. The URL is based on the package name that the class is defined in and the class name itself. First the plugin determines the namespace of the URL using the package names between the root package and the package the class is defined in. For our examples above, the namespaces would be:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>Namespaces</B></DIV><DIV class="codeContent">
<PRE class="code-java">com.example.actions.MainAction -&gt; /
com.example.actions.products.Display -&gt; /products
com.example.struts.company.details.ShowCompanyDetailsAction -&gt; /company/details</PRE>
</DIV></DIV>

<P>Next, the plugin determines the URL of the resource using the class name. It first removes the word <B>Action</B> from the end of the class name and then converts camel case names to dashes. In our example the full URLs would be:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>Full URLs</B></DIV><DIV class="codeContent">
<PRE class="code-java">com.example.actions.MainAction -&gt; /main
com.example.actions.products.Display -&gt; /products/display
com.example.struts.company.details.ShowCompanyDetailsAction -&gt; /company/details/show-company-details</PRE>
</DIV></DIV>

<P>You can tell the Convention plugin to ignore certain packages using the property <B>struts.convention.exclude.packages</B>. You can also tell the plugin to use different strings to locate root packages using the property <B>struts.convention.package.locators</B>. Finally, you can tell the plugin to search specific root packages using the property <B>struts.convention.action.packages</B>.</P>

<P>Here is our code behind action class:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 

<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  <SPAN class="code-keyword">private</SPAN> <SPAN class="code-object">String</SPAN> message;

  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> getMessage() {
    <SPAN class="code-keyword">return</SPAN> message;
  }

  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    message = <SPAN class="code-quote">&quot;Hello World!&quot;</SPAN>;
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<P>If you compile this class and place it into your application in the WEB-INF/classes, the Convention plugin will find the class and map the URL <B>/hello-world</B> to it. Next, we need to update our JSP to print out the message we setup in the action class. Here is the new JSP:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>WEB-INF/content/hello-world.jsp</B></DIV><DIV class="codeContent">
<PRE class="code-java">&lt;html&gt;
&lt;body&gt;
The message is ${message}
&lt;/body&gt;
&lt;/html&gt;</PRE>
</DIV></DIV>

<P>If start up the application server and open up <SPAN class="nobr"><A href="http://localhost:8080/hello-world" title="Visit page outside Confluence" rel="nofollow">http://localhost:8080/hello-world<SUP><IMG class="rendericon" src="http://cwiki.apache.org/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"></SUP></A></SPAN> in our browser, we should get this result:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>Result</B></DIV><DIV class="codeContent">
<PRE class="code-java">The message is Hello World!</PRE>
</DIV></DIV>

<H1><A name="ConventionPlugin-Resultsandresultcodes"></A>Results and result codes</H1>

<P>The Convention Plugin will pre-configure all of you action classes when Struts is started. By default, this configuration will also contain results for any JSPs that it can find within the application. The JSPs have an additional feature that allows different JSPs to be used based on the result code of the action. Since action methods return Strings and these Strings are traditionally used to locate results for the action, the Convention plugin allows you to define different results based on the result code.</P>

<P>Building on our example from above, let's say we want to provide a different result if the result code from our action is the String <B>zero</B> rather than <B>success</B>. First, we update the action class to return different result codes:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 

<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  <SPAN class="code-keyword">private</SPAN> <SPAN class="code-object">String</SPAN> message;

  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> getMessage() {
    <SPAN class="code-keyword">return</SPAN> message;
  }

  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">if</SPAN> (<SPAN class="code-object">System</SPAN>.currentTimeMillis() % 2 == 0) {
      message = <SPAN class="code-quote">&quot;It's 0&quot;</SPAN>;
      <SPAN class="code-keyword">return</SPAN> <SPAN class="code-quote">&quot;zero&quot;</SPAN>;
    }

    message = <SPAN class="code-quote">&quot;It's 1&quot;</SPAN>;
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<P>Next, we add a new JSP to the application named <B>WEB-INF/content/hello-world-zero.jsp</B>. Notice that the first part of the file name is the same as the URL of the action and the last part of the name is the result code. This is the convention that the plugin uses to determine which results to render. Here is our new JSP:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>WEB-INF/content/hello-world.jsp</B></DIV><DIV class="codeContent">
<PRE class="code-java">&lt;html&gt;
&lt;body&gt;
The error message is ${message}
&lt;/body&gt;
&lt;/html&gt;</PRE>
</DIV></DIV>

<P>Now, if you compile the action and restart the application, based on the current time, you'll either see the result from <B>WEB-INF/content/hello-world.jsp</B> or <B>WEB-INF/content/hello-world-zero.jsp</B>.</P>

<P>The result type is based on the extension of the file. The supported extensions are: jsp,ftl,vm,html,html. Examples of Action and Result to Template mapping:</P>

<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">URL</TH>
<TH class="confluenceTh">Result</TH>
<TH class="confluenceTh">File that could match</TH>
<TH class="confluenceTh">Result Type</TH>
</TR>
<TR>
<TD class="confluenceTd">/hello</TD>
<TD class="confluenceTd">success</TD>
<TD class="confluenceTd">/WEB-INF/content/hello.jsp</TD>
<TD class="confluenceTd">Dispatcher</TD>
</TR>
<TR>
<TD class="confluenceTd">/hello</TD>
<TD class="confluenceTd">success</TD>
<TD class="confluenceTd">/WEB-INF/content/hello-success.htm</TD>
<TD class="confluenceTd">Dispatcher</TD>
</TR>
<TR>
<TD class="confluenceTd">/hello</TD>
<TD class="confluenceTd">success</TD>
<TD class="confluenceTd">/WEB-INF/content/hello.ftl</TD>
<TD class="confluenceTd">FreeMarker</TD>
</TR>
<TR>
<TD class="confluenceTd">/hello-world</TD>
<TD class="confluenceTd">input</TD>
<TD class="confluenceTd">/WEB-INF/content/hello-world-input.vm</TD>
<TD class="confluenceTd">Velocity</TD>
</TR>
<TR>
<TD class="confluenceTd">/test1/test2/hello</TD>
<TD class="confluenceTd">error</TD>
<TD class="confluenceTd">/WEB-INF/content/test/test2/hello-error.html</TD>
<TD class="confluenceTd">Dispatcher</TD>
</TR>
</TBODY></TABLE>

<H1><A name="ConventionPlugin-Chaining"></A>Chaining</H1>
<P>If one action returns the name of another action in the same package, they will be chained together, if the first action doesn't have any result defined for that code. In the following example:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.Action;
<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 

<SPAN class="code-keyword">public</SPAN> class HelloAction <SPAN class="code-keyword">extends</SPAN> ActionSupport {
    @Action(<SPAN class="code-quote">&quot;foo&quot;</SPAN>)
    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> foo() {
        <SPAN class="code-keyword">return</SPAN> <SPAN class="code-quote">&quot;bar&quot;</SPAN>;
    }

    @Action(<SPAN class="code-quote">&quot;foo-bar&quot;</SPAN>)
    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> bar() {
        <SPAN class="code-keyword">return</SPAN> SUCCESS;
    }
}</PRE>
</DIV></DIV>

<P>The &quot;foo&quot; action will be executed, because no result is found, the Convention plugin tries to find an action named &quot;foo-bar&quot; on the same package where &quot;foo&quot; is defined. If such an action is found, it will be invoked using the &quot;chain&quot; result.</P>

<H1><A name="ConventionPlugin-XWorkpackages"></A>XWork packages</H1>

<P>Actions are placed on a custom XWork package which prevents conflicts. The name of this package is based on the Java package the action is defined in, the namespace part of the URL for the action and the parent XWork package for the action. The parent XWork package is determined based on the property named <B>struts.convention.default.parent.package</B>(defaults to <B>conventionDefault</B>), which is a custom XWork package that extends <B>strutsDefault</B>. </P>

<P>Therefore the naming for XWork packages used by the Convention plugin are in the form:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>XWork package naming</B></DIV><DIV class="codeContent">
<PRE class="code-java">&lt;java-<SPAN class="code-keyword">package</SPAN>&gt;#&lt;namespace&gt;#&lt;parent-<SPAN class="code-keyword">package</SPAN>&gt;</PRE>
</DIV></DIV>

<P>Using our example from above, the XWork package for our action would be:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>XWork package naming</B></DIV><DIV class="codeContent">
<PRE class="code-java">com.example.actions#/#conventionDefault</PRE>
</DIV></DIV>

<H1><A name="ConventionPlugin-Annotationreference"></A>Annotation reference</H1>

<P>The Convention plugin uses a number of different annotations to override the default conventions that are used to map actions to URLs and locate results. In addition, you can modify the parent XWork package that actions are configured with.</P>

<H2><A name="ConventionPlugin-Actionannotation"></A>Action annotation</H2>

<P>The Convention plugin allows action classes to change the URL that they are mapped to using the <B>Action</B> annotation. This annotation can also be used inside the <B>Actions</B> annotation to allow multiple URLs to map to a single action class. This annotation must be defined on action methods like this:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Action;

<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  @Action(<SPAN class="code-quote">&quot;/different/url&quot;</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<P>Our action class will now map to the URL <B>/different/url</B> rather than <B>/hello-world</B>. If no <B>@Result</B> (see next section) is specified, then the namespace of the action will be used as the path to the result, on our last example it would be &quot;/WEB-INF/content/different/url.jsp&quot;.</P>

<P>A single method within an action class can also map to multiple URLs using the <B>Actions</B> annotation like this:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Action;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Actions;

<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  @Actions({
    @Action(<SPAN class="code-quote">&quot;/different/url&quot;</SPAN>),
    @Action(<SPAN class="code-quote">&quot;/another/url&quot;</SPAN>)
  })
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<P>Another usage of the <B>Action</B> or <B>Actions</B> annotation is to define multiple action methods within a single action class, each of which respond to a different URL. Here is an example of multiple action methods:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Action;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Actions;

<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  @Action(<SPAN class="code-quote">&quot;/different/url&quot;</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;

  }

  @Action(<SPAN class="code-quote">&quot;url&quot;</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> doSomething() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<P>The previous example defines a second URL that is not fully qualified. This means that the namespace for the URL is determined using the Java package name rather than the Action annotation.</P>

<P>Interceptor and interceptor stacks can be specified using the <B>interceptorRefs</B> attribute. The following example applies the &quot;validation&quot; interceptor and the &quot;defaultStack&quot; interceptor stack to the action:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Action;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Actions;

<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  @Action(interceptorRefs={@InterceptorRef(<SPAN class="code-quote">&quot;validation&quot;</SPAN>), @InterceptorRef(<SPAN class="code-quote">&quot;defaultStack&quot;</SPAN>)})
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }

  @Action(<SPAN class="code-quote">&quot;url&quot;</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> doSomething() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<P>Parameters can be passed to results using the <B>params</B> attribute. The value of this attribute is a string array with an even number of elements in the form {&quot;key0&quot;, &quot;value0, &quot;key1&quot;, &quot;value1&quot; ... &quot;keyN&quot;, &quot;valueN&quot;}. For example:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Action;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Actions;

<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  @Action(interceptorRefs=@InterceptorRef(value=<SPAN class="code-quote">&quot;validation&quot;</SPAN>,params={<SPAN class="code-quote">&quot;programmatic&quot;</SPAN>, <SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN>, <SPAN class="code-quote">&quot;declarative&quot;</SPAN>, &quot;<SPAN class="code-keyword">true</SPAN>}))
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }

  @Action(<SPAN class="code-quote">&quot;url&quot;</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> doSomething() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<P>If interceptors are not specified, the default stack is applied.</P>

<H2><A name="ConventionPlugin-InterceptorRefannotation"></A>InterceptorRef annotation</H2>
<P>Interceptors can be specified at the method level, using the <B>Action</B> annotation or at the class level using the <B>InterceptorRefs</B> annotation. Interceptors specified at the class level will be applied to all actions defined on that class. In the following example:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Action;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Actions;

@InterceptorRefs({
    @InterceptorRef(<SPAN class="code-quote">&quot;interceptor-1&quot;</SPAN>),
    @InterceptorRef(<SPAN class="code-quote">&quot;defaultStack&quot;</SPAN>)
})
<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  @Action(value=<SPAN class="code-quote">&quot;action1&quot;</SPAN>, interceptorRefs=@InterceptorRef(<SPAN class="code-quote">&quot;validation&quot;</SPAN>))
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }

  @Action(value=<SPAN class="code-quote">&quot;action2&quot;</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> doSomething() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<P>The following interceptors will be applied to &quot;action1&quot;: &quot;interceptor-1&quot;, all interceptors from &quot;defaultStack&quot;, &quot;validation&quot;.<BR>
All interceptors from  &quot;defaultStack&quot; will be applied to &quot;action2&quot;.</P>

<H2><A name="ConventionPlugin-Resultannotation"></A>Result annotation</H2>

<P>The Convention plugin allows action classes to define different results for an action. Results fall into two categories, global and local. Global results are shared across all actions defined within the action class. These results are defined as annotations on the action class. Local results apply only to the action method they are defined on. Here is an example of the different types of result annotations:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Action;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Actions;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Result;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Results;

@Results({
  @Result(name=<SPAN class="code-quote">&quot;failure&quot;</SPAN>, location=<SPAN class="code-quote">&quot;fail.jsp&quot;</SPAN>)
})
<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  @Action(value=<SPAN class="code-quote">&quot;/different/url&quot;</SPAN>, 
    results={@Result(name=<SPAN class="code-quote">&quot;success&quot;</SPAN>, location=<SPAN class="code-quote">&quot;http:<SPAN class="code-comment">//struts.apache.org&quot;</SPAN>, type=<SPAN class="code-quote">&quot;redirect&quot;</SPAN>)}
</SPAN>  )
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }

  @Action(<SPAN class="code-quote">&quot;/another/url&quot;</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> doSomething() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<P>Parameters can be passed to results using the <B>params</B> attribute. The value of this attribute is a string array with an even number of elements in the form {&quot;key0&quot;, &quot;value0, &quot;key1&quot;, &quot;value1&quot; ... &quot;keyN&quot;, &quot;valueN&quot;}. For example:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Action;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Actions;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Result;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Results;

<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  @Action(value=<SPAN class="code-quote">&quot;/different/url&quot;</SPAN>, 
    results={@Result(name=<SPAN class="code-quote">&quot;success&quot;</SPAN>, type=<SPAN class="code-quote">&quot;httpheader&quot;</SPAN>, params={<SPAN class="code-quote">&quot;status&quot;</SPAN>, <SPAN class="code-quote">&quot;500&quot;</SPAN>, <SPAN class="code-quote">&quot;errorMessage&quot;</SPAN>, <SPAN class="code-quote">&quot;Internal Error&quot;</SPAN>})}
  )
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }

  @Action(<SPAN class="code-quote">&quot;/another/url&quot;</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> doSomething() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<H2><A name="ConventionPlugin-Namespaceannotation"></A>Namespace annotation</H2>

<P>The namespace annotation allows the namespace for action classes to be changed instead of using the convention of the Java package name. This annotation can be placed on an action class or within the package-info.java class that allows annotations to be placed on Java packages. When this annotation is put on an action class, it applies to all actions defined in the class, that are not fully qualified action URLs. When this annotation is place in the package-info.java file, it changes the default namespace for all actions defined in the Java package. Here is an example of the annotation on an action class:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Action;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Namespace;

@Namespace(<SPAN class="code-quote">&quot;/custom&quot;</SPAN>)
<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  @Action(<SPAN class="code-quote">&quot;/different/url&quot;</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }

  @Action(<SPAN class="code-quote">&quot;url&quot;</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> doSomething() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<P>In this example, the action will respond to two different URLs <B>/different/url</B> and <B>/custom/url</B>.</P>

<P>Here is an example of using this annotation in the package-info.java file:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com/example/actions/package-info.java</B></DIV><DIV class="codeContent">
<PRE class="code-java">@org.apache.struts2.convention.annotation.Namespace(<SPAN class="code-quote">&quot;/custom&quot;</SPAN>)
<SPAN class="code-keyword">package</SPAN> com.example.actions;</PRE>
</DIV></DIV>

<P>This changes the default namespace for all actions defined in the package <B>com.example.actions</B>. This annotation however doesn't apply to sub-packages.</P>

<H2><A name="ConventionPlugin-ResultPathannotation"></A>ResultPath annotation</H2>

<P>The ResultPath annotation allows applications to change the location where results are stored. This annotation can be placed on an action class and also in the package-info.java file. Here is an example of using this annotation:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Action;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.ResultPath;

@ResultPath(<SPAN class="code-quote">&quot;/WEB-INF/jsps&quot;</SPAN>)
<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<P>The result for this class will be located in <B>WEB-INF/jsps</B> rather than the default of <B>WEB-INF/content</B>.</P>

<H2><A name="ConventionPlugin-ParentPackageannotation"></A>ParentPackage annotation</H2>

<P>The ParentPackage annotation allows applications to define different parent XWork packages for specific action classes or Java packages. Here is an example of using the annotation on an action class:</P>

<DIV class="code" style="border-style: solid; "><DIV class="codeHeader" style="border-bottom-style: solid; "><B>com.example.actions.HelloWorld</B></DIV><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">package</SPAN> com.example.actions;

<SPAN class="code-keyword">import</SPAN> com.opensymphony.xwork2.ActionSupport; 
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.Action;
<SPAN class="code-keyword">import</SPAN> org.apache.struts2.convention.annotation.ParentPackage;

@ParentPackage(<SPAN class="code-quote">&quot;customXWorkPackage&quot;</SPAN>)
<SPAN class="code-keyword">public</SPAN> class HelloWorld <SPAN class="code-keyword">extends</SPAN> ActionSupport {
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() {
    <SPAN class="code-keyword">return</SPAN> SUCCESS;
  }
}</PRE>
</DIV></DIV>

<H2><A name="ConventionPlugin-ExceptionMappingAnnotation"></A>ExceptionMapping Annotation</H2>

<P>This annotation can be used to define exception mappings to actions. See the <A href="exception-configuration.html" title="Exception Configuration">exception mapping documentation</A> for more details. These mappings can be applied to the class level, in which case they will be applied to all actions defined on that class: </P>

<DIV class="code"><DIV class="codeHeader"><B>ExceptionsActionLevelAction.java</B></DIV><DIV class="codeContent">
<PRE class="code-java">@ExceptionMappings({
    @ExceptionMapping(exception = <SPAN class="code-quote">&quot;java.lang.NullPointerException&quot;</SPAN>, result = <SPAN class="code-quote">&quot;success&quot;</SPAN>, params = {<SPAN class="code-quote">&quot;param1&quot;</SPAN>, <SPAN class="code-quote">&quot;val1&quot;</SPAN>})
})
<SPAN class="code-keyword">public</SPAN> class ExceptionsActionLevelAction {

    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> execute() <SPAN class="code-keyword">throws</SPAN> Exception {
        <SPAN class="code-keyword">return</SPAN> <SPAN class="code-keyword">null</SPAN>;
    }
}</PRE>
</DIV></DIV>

<P>The parameters defined by <B>params</B> are passed to the result. Exception mappings can also be applied to the action level:</P>

<DIV class="code"><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">public</SPAN> class ExceptionsMethodLevelAction {
    @Action(value = <SPAN class="code-quote">&quot;exception1&quot;</SPAN>, exceptionMappings = {
            @ExceptionMapping(exception = <SPAN class="code-quote">&quot;java.lang.NullPointerException&quot;</SPAN>, result = <SPAN class="code-quote">&quot;success&quot;</SPAN>, params = {<SPAN class="code-quote">&quot;param1&quot;</SPAN>, <SPAN class="code-quote">&quot;val1&quot;</SPAN>})
    })
    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> run1() <SPAN class="code-keyword">throws</SPAN> Exception {
        <SPAN class="code-keyword">return</SPAN> <SPAN class="code-keyword">null</SPAN>;
    }
}</PRE>
</DIV></DIV>

<H1><A name="ConventionPlugin-Automaticconfigurationreloading"></A>Automatic configuration reloading</H1>
<P>The Convention plugin can automatically reload configuration changes, made in classes the contain actions, without restarting the container. This is a similar behavior to the automatic xml configuration reloading. To enable this feature, add this to your <B>struts.xml</B> file:</P>

<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml"><SPAN class="code-tag">&lt;constant name=<SPAN class="code-quote">&quot;struts.devMode&quot;</SPAN> value=<SPAN class="code-quote">&quot;true&quot;</SPAN>/&gt;</SPAN>
<SPAN class="code-tag">&lt;constant name=<SPAN class="code-quote">&quot;struts.convention.classes.reload&quot;</SPAN> value=<SPAN class="code-quote">&quot;true&quot;</SPAN> /&gt;</SPAN></PRE>
</DIV></DIV>

<P>This feature is experimental and has not been tested on all container, and it is <B>strongly</B> advised not to use it in production environments. </P>

<H1><A name="ConventionPlugin-Troubleshooting"></A>Troubleshooting</H1>
<H2><A name="ConventionPlugin-Tips"></A>Tips</H2>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="tipMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://cwiki.apache.org/confluence/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Namespaces and Results</B><BR>
<P>Make sure the namespace of you action is matched by one of the locators. The rest of the namespace after the locator, will be the namespace of the action, and will be used to find the results. For example, a class called &quot;ViewAction&quot; in the package &quot;my.example.actions.orders&quot; will be mapped to the URL <B>/orders/view.action</B>, and the results must be under <B>/WEB-INF/content/orders</B>, like <B>/WEB-INF/content/orders/view-success.jsp</B>. </P></TD></TR></TABLE>

<TABLE cellpadding="5" width="85%" cellspacing="8px" class="tipMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://cwiki.apache.org/confluence/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Use the Configuration Browser Plugin</B><BR>
<P>Add the <A href="config-browser-plugin.html" title="Config Browser Plugin">Config Browser Plugin</A> plugin to you lib folder or maven dependencies, and then visit: <SPAN class="nobr"><A href="http://localhost:8080/YOUR_CONTEXT_HERE/config-browser/index.action" title="Visit page outside Confluence" rel="nofollow">http://localhost:8080/YOUR_CONTEXT_HERE/config-browser/index.action<SUP><IMG class="rendericon" src="http://cwiki.apache.org/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"></SUP></A></SPAN>, to see the current action mappings.</P></TD></TR></TABLE>

<TABLE cellpadding="5" width="85%" cellspacing="8px" class="tipMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://cwiki.apache.org/confluence/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Enable trace or debug mode</B><BR>
<P>The Convention plugin can generate a rather verbose output when set to debug mode for logging. Use &quot;Trace&quot; logging level if you are using the JDK logger. If you are using Log4J, you can do something like:</P>

<P>log4j.logger.org.apache.struts2.convention=DEBUG</P></TD></TR></TABLE>

<H2><A name="ConventionPlugin-CommonErrors"></A>Common Errors</H2>
<OL>
	<LI>I get an error like &quot;There is no Action mapped for namespace /orders and action name view.&quot;. This means that the URL <B>/orders/view.action</B> is not mapping to any action class. Check the namespace and the name of the action.</LI>
	<LI>I get an error like &quot;No result defined for action &quot;my.example.actions.orders.ViewAction and result success&quot;. This means that the action was mapped to the right URL, but the Convention plugin was unable to find a <B>success</B> result for it. Check that the result file exists, like <B>/WEB-INF/content/orders/view-success.jsp</B>.</LI>
</OL>


<H1><A name="ConventionPlugin-Configurationreference"></A>Configuration reference</H1>
<P>Add a <B>constant</B> element to your struts config file to change the value of a configuration setting, like:</P>

<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml"><SPAN class="code-tag">&lt;constant name=<SPAN class="code-quote">&quot;struts.convention.result.path&quot;</SPAN> value=<SPAN class="code-quote">&quot;/WEB-INF/mytemplates/&quot;</SPAN>/&gt;</SPAN></PRE>
</DIV></DIV>

<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Name</TH>
<TH class="confluenceTh">Default Value</TH>
<TH class="confluenceTh">Description</TH>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.action.disableJarScanning</TD>
<TD class="confluenceTd">true</TD>
<TD class="confluenceTd">Scan jar files for actions</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.action.packages</TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd">An optional list of action packages that this should create configuration for (they don't need to match a locator pattern)</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.result.path</TD>
<TD class="confluenceTd">/WEB-INF/content/</TD>
<TD class="confluenceTd">Directory where templates are located</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.result.flatLayout</TD>
<TD class="confluenceTd">true</TD>
<TD class="confluenceTd">If set to false, the result can be put in its own directory: resultsRoot/namespace/actionName/result.extension</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.action.suffix</TD>
<TD class="confluenceTd">Action</TD>
<TD class="confluenceTd">Suffix used to find actions based on class names</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.action.disableScanning</TD>
<TD class="confluenceTd">false</TD>
<TD class="confluenceTd">Scan packages for actions</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.action.mapAllMatches</TD>
<TD class="confluenceTd">false</TD>
<TD class="confluenceTd">Create action mappings, even if no @Action is found</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.action.checkImplementsAction</TD>
<TD class="confluenceTd">true</TD>
<TD class="confluenceTd">Check if an action implements com.opensymphony.xwork2.Action to create an action mapping</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.default.parent.package</TD>
<TD class="confluenceTd">convention-default</TD>
<TD class="confluenceTd">Default parent package for action mappins</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.action.name.lowercase</TD>
<TD class="confluenceTd">true</TD>
<TD class="confluenceTd">Convert action name to lowercase</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.action.name.separator</TD>
<TD class="confluenceTd">-</TD>
<TD class="confluenceTd">Separator used to build the action name, MyAction -&gt; my-action. This character is also used as the separator between the action name and the result in templates, like action-result.jsp</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.package.locators</TD>
<TD class="confluenceTd">action,actions,struts,struts2</TD>
<TD class="confluenceTd">Packages whose name end with one of these strings will be scanned for actions</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.package.locators.disable</TD>
<TD class="confluenceTd">false</TD>
<TD class="confluenceTd">Disable the scanning of packages based on package locators</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.exclude.packages</TD>
<TD class="confluenceTd">org.apache.struts.*,<BR>
org.apache.struts2.*,<BR>
org.springframework.web.struts.*,<BR>
org.springframework.web.struts2.*,<BR>
org.hibernate.*</TD>
<TD class="confluenceTd">Packages excluded from the action scanning</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.package.locators.basePackage</TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd">If set, only packages that start with its value will be scanned for actions</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.relative.result.types</TD>
<TD class="confluenceTd">dispatcher,velocity,freemarker</TD>
<TD class="confluenceTd">The list of result types that can have locations that are relative and the result location (which is the resultPath plus the namespace) prepended to them</TD>
</TR>
<TR>
<TD class="confluenceTd">struts.convention.redirect.to.slash</TD>
<TD class="confluenceTd">true</TD>
<TD class="confluenceTd">A boolean parameter that controls whether or not this will handle unknown actions in the same manner as Apache, Tomcat and other web servers. This handling will send back a redirect for URLs such as /foo to /foo/ if there doesn't exist an action that responds to /foo</TD>
</TR>
</TBODY></TABLE>
        </DIV>

        
      </DIV>
    </DIV>
    <DIV class="footer">
      Generated by
      <A href="http://www.atlassian.com/confluence/">Atlassian Confluence</A> (Version: 2.2.9 Build: 527 Sep 07, 2006)
      <A href="http://could.it/autoexport/">AutoExport Plugin</A> (Version: Unknown - PluginManager Error)
    </DIV>
  </BODY>
</HTML>